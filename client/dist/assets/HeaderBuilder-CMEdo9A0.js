import{j as e,r as h}from"./react-vendor-DX8DjTp6.js";import{a as g}from"./axios-C0Zqfgkc.js";import{Q as O,P as W,R as G,l as Y,v as J,N as T,V as R,W as V,Y as $}from"./vendor-DFPNiMdV.js";/* empty css              */const Q=({settings:r,onChange:s,onToast:l,setSaving:o})=>{const m=async t=>{const n=t.target.files[0];if(!n)return;const d=new FormData;d.append("image",n),o(!0);try{if(!n.type.startsWith("image/"))throw new Error("Invalid file type. Please upload an image.");if(n.size>2097152)throw new Error("File too large. Maximum size is 2MB.");const f=await g.post("/api/upload",d);s("logoUrl",f.data.url),l("Image uploaded successfully","success")}catch(f){console.error(f),l(f.message||"Upload failed","error")}finally{o(!1)}};return e.jsxs("div",{className:"table-card",style:{padding:"20px"},children:[e.jsx("h3",{style:{marginTop:0,borderBottom:"1px solid #eee",paddingBottom:"10px"},children:"Branding"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"siteTitle",children:"Site Title"}),e.jsx("input",{id:"siteTitle",type:"text",className:"form-input",value:r.siteTitle||"",onChange:t=>s("siteTitle",t.target.value),placeholder:"e.g. MarmarisTrip"})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[e.jsx("label",{children:"Logo"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.logoUrl&&e.jsx("img",{src:r.logoUrl,alt:"Logo Preview",style:{height:"40px",border:"1px solid #ddd",borderRadius:"4px"}}),e.jsxs("label",{className:"btn-filter",style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[e.jsx(O,{size:14,style:{marginRight:"5px"}}),"Upload Logo",e.jsx("input",{type:"file",hidden:!0,onChange:m,accept:"image/png, image/jpeg, image/webp"})]})]}),e.jsx("small",{style:{color:"#666",marginTop:"5px",display:"block"},children:"Recommended: PNG or WebP, max height 40px."})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[e.jsx("label",{children:"Sticky Header"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",fontSize:"0.9rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r.sticky===!0,onChange:t=>s("sticky",t.target.checked)}),"Enable sticky header on scroll"]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[e.jsx("label",{children:"Header Background Color"}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("input",{type:"color",className:"form-input",style:{height:"40px",width:"60px",padding:0,border:"none"},value:r.backgroundColor||"#ffffff",onChange:t=>s("backgroundColor",t.target.value)}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#666"},children:r.backgroundColor||"#ffffff"})]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[e.jsx("label",{children:"Currency Selector"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",fontSize:"0.9rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r.showCurrency!==!1,onChange:t=>s("showCurrency",t.target.checked)}),"Show Currency Selector"]})]}),e.jsxs("div",{style:{marginTop:"15px",padding:"10px",background:"#f8f9fa",borderRadius:"4px",fontSize:"0.85rem",color:"#666"},children:[e.jsx("strong",{children:"Tip:"})," If you use a white background, the domain text will be dark blue. If you use a dark background (like #003580), text will be white."]})]})},q=({navItems:r,onEdit:s,onDelete:l,onAdd:o})=>{const m=["CarTaxiFront","Map","Ticket","BookOpen","Globe","LifeBuoy","Info","FileText","User","Phone","Mail","Star","Search"];return e.jsxs("div",{className:"table-card",style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",paddingBottom:"10px",marginBottom:"15px"},children:[e.jsx("h3",{style:{margin:0},children:"Navigation Menu"}),e.jsxs("button",{className:"btn-action btn-detail",onClick:o,style:{width:"auto",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(W,{size:14})," Add Item"]})]}),e.jsx("div",{className:"nav-items-grid",style:{display:"flex",flexDirection:"column",gap:"10px"},children:r.map((t,n)=>e.jsxs("div",{style:{background:"#f9f9f9",padding:"10px",borderRadius:"4px",border:"1px solid #eee",display:"flex",gap:"10px",alignItems:"center",transition:"background 0.2s ease"},children:[e.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 120px",gap:"10px"},children:[e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#666",marginBottom:"2px",display:"block"},children:"Label"}),e.jsx("input",{className:"form-input",value:t.label,onChange:d=>s(n,"label",d.target.value),placeholder:"Menu Label"})]}),e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#666",marginBottom:"2px",display:"block"},children:"Path"}),e.jsx("input",{className:"form-input",value:t.path,onChange:d=>s(n,"path",d.target.value),placeholder:"/path"})]}),e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#666",marginBottom:"2px",display:"block"},children:"Icon"}),e.jsxs("select",{className:"form-input",value:t.icon||"",onChange:d=>s(n,"icon",d.target.value),children:[e.jsx("option",{value:"",children:"None"}),m.map(d=>e.jsx("option",{value:d,children:d},d))]})]})]}),e.jsx("button",{className:"btn-action btn-delete",onClick:()=>l(n),style:{width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:"Remove Item",children:e.jsx(G,{size:14})})]},n))}),r.length===0&&e.jsx("div",{style:{textAlign:"center",color:"#888",padding:"20px",border:"1px dashed #ddd",borderRadius:"4px"},children:'No navigation items yet. Click "Add Item" to start.'})]})},K=({contact:r,socials:s,onChange:l})=>e.jsxs("div",{className:"table-card",style:{padding:"20px"},children:[e.jsx("h3",{style:{marginTop:0,borderBottom:"1px solid #eee",paddingBottom:"10px"},children:"Contact & Socials"}),e.jsxs("div",{className:"detail-form-grid",style:{gridTemplateColumns:"1fr 1fr",padding:0,boxShadow:"none"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("input",{type:"tel",className:"form-input",value:r.phone||"",onChange:o=>l("contact","phone",o.target.value),placeholder:"+90 555 123 4567"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"email",className:"form-input",value:r.email||"",onChange:o=>l("contact","email",o.target.value),placeholder:"info@example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Facebook URL"}),e.jsx("input",{type:"url",className:"form-input",value:s.facebook||"",onChange:o=>l("socials","facebook",o.target.value),placeholder:"https://facebook.com/..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Instagram URL"}),e.jsx("input",{type:"url",className:"form-input",value:s.instagram||"",onChange:o=>l("socials","instagram",o.target.value),placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TikTok URL"}),e.jsx("input",{type:"url",className:"form-input",value:s.tiktok||"",onChange:o=>l("socials","tiktok",o.target.value),placeholder:"https://tiktok.com/..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"YouTube URL"}),e.jsx("input",{type:"url",className:"form-input",value:s.youtube||"",onChange:o=>l("socials","youtube",o.target.value),placeholder:"https://youtube.com/..."})]})]})]}),X=({cta:r,onChange:s})=>e.jsxs("div",{className:"table-card",style:{padding:"20px"},children:[e.jsx("h3",{style:{marginTop:0,borderBottom:"1px solid #eee",paddingBottom:"10px"},children:"Primary CTA Button"}),e.jsx("div",{style:{display:"flex",gap:"15px",alignItems:"center",marginBottom:"10px"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r.enabled!==!1,onChange:l=>s("cta","enabled",l.target.checked)}),"Enabled"]})}),e.jsxs("div",{className:"detail-form-grid",style:{gridTemplateColumns:"1fr 1fr",padding:0,boxShadow:"none"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Label"}),e.jsx("input",{type:"text",className:"form-input",value:r.label||"",onChange:l=>s("cta","label",l.target.value),placeholder:"e.g. Log in"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Link / Path"}),e.jsx("input",{type:"text",className:"form-input",value:r.path||"",onChange:l=>s("cta","path",l.target.value),placeholder:"/admin"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Background Color"}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("input",{type:"color",className:"form-input",style:{height:"40px",width:"60px",padding:0,border:"none"},value:r.color||"#003580",onChange:l=>s("cta","color",l.target.value)}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#666"},children:r.color||"#003580"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Text Color"}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("input",{type:"color",className:"form-input",style:{height:"40px",width:"60px",padding:0,border:"none"},value:r.textColor||"#ffffff",onChange:l=>s("cta","textColor",l.target.value)}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#666"},children:r.textColor||"#ffffff"})]})]})]})]}),Z=({isOpen:r,history:s,onClose:l,onRestore:o})=>r?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},children:e.jsxs("div",{className:"table-card",style:{width:"600px",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsx("h3",{children:"Version History"}),e.jsx("button",{className:"btn-action",onClick:l,style:{background:"#333"},children:"Close"})]}),s.length===0?e.jsx("p",{children:"No history available."}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:s.map((m,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(m.timestamp).toLocaleString()}),e.jsx("td",{children:e.jsx("button",{className:"btn-action btn-detail",onClick:()=>o(t),style:{width:"auto"},children:"Restore"})})]},t))})]})]})}):null,oe=()=>{const r={siteTitle:"",logoUrl:"",tagline:"",contact:{phone:"",email:""},socials:{facebook:"",instagram:"",tiktok:"",youtube:""},navItems:[{label:"Private Airport Transfers",path:"/",icon:"CarTaxiFront"},{label:"Excursions",path:"/excursions",icon:"Map"}],cta:{label:"Log in",path:"/admin",icon:"User",color:"",enabled:!0},sticky:!0},[s,l]=h.useState(r),[o,m]=h.useState(!0),[t,n]=h.useState(!1),[d,f]=h.useState([]),[k,v]=h.useState(!1),[w,z]=h.useState(null),[N,B]=h.useState(null),[ee,se]=h.useState("desktop"),[u,C]=h.useState({show:!1,message:"",type:"success"});h.useEffect(()=>{y()},[]),h.useEffect(()=>{if(u.show){const a=setTimeout(()=>C({...u,show:!1}),3e3);return()=>clearTimeout(a)}},[u.show]);const x=(a,c="success")=>{C({show:!0,message:a,type:c})},y=async()=>{m(!0);try{const a=await g.get(`/api/admin/settings/header?t=${Date.now()}`);if(a.data.data){let c=JSON.stringify(a.data.data);c.includes("Pessenger")&&(c=c.replace(/Pessenger/g,"Passenger"));const i=JSON.parse(c),{draft_value:p,value:j,history:M,updated_at:I,published_at:_}=i;z(I),B(_||(j&&!p?I:null));const b=p||j||{};l(te=>({...r,...b,contact:{...r.contact,...b.contact||{}},socials:{...r.socials,...b.socials||{}},cta:{...r.cta,...b.cta||{}},navItems:Array.isArray(b.navItems)?b.navItems:r.navItems})),f(M||[])}}catch(a){console.error(a),x("Failed to load settings","error")}finally{m(!1)}},L=async()=>{if(!t){n(!0);try{const a=s.navItems.filter(i=>i.label.trim()!==""||i.path.trim()!==""),c={...s,navItems:a.map(i=>({label:i.label,path:i.path,icon:i.icon||""}))};l(i=>({...i,navItems:a})),await g.put("/api/admin/settings/header/draft",{draft_value:c}),x("Draft saved successfully!","success"),y()}catch(a){console.error(a),x("Error saving draft","error")}finally{n(!1)}}},P=async()=>{if(!t&&window.confirm("Are you sure you want to publish these changes? This will go live immediately.")){n(!0);try{const a=s.navItems.filter(i=>i.label.trim()!==""||i.path.trim()!==""),c={...s,navItems:a};await g.put("/api/admin/settings/header/draft",{draft_value:c}),await g.post("/api/admin/settings/header/publish"),x("Published successfully! Please refresh the live site (Ctrl+F5) to see changes.","success"),await y()}catch(a){console.error(a),x("Error publishing changes","error"),n(!1)}}},D=async()=>{if(!t&&window.confirm("Discard all draft changes and revert to the last published version?")){n(!0);try{await g.post("/api/admin/settings/header/revert"),await y(),x("Reverted to published version.","success")}catch{x("Failed to revert","error")}finally{n(!1)}}},F=async a=>{if(!t&&window.confirm("Restore this version? It will become the new draft.")){n(!0);try{await g.post("/api/admin/settings/header/rollback",{versionIndex:a}),await y(),v(!1),x("History version restored to draft.","success")}catch{x("Failed to rollback","error")}finally{n(!1)}}},U=(a,c)=>{l(i=>({...i,[a]:c}))},S=(a,c,i)=>{l(p=>({...p,[a]:{...p[a],[c]:i}}))},A=(a,c,i)=>{const p=[...s.navItems];p[a]={...p[a],[c]:i},l(j=>({...j,navItems:p}))},H=()=>{l(a=>({...a,navItems:[...a.navItems,{label:"New Link",path:"/",icon:"Map"}]}))},E=a=>{const c=s.navItems.filter((i,p)=>p!==a);l(i=>({...i,navItems:c}))};return o?e.jsx("div",{className:"admin-container",children:"Loading settings..."}):e.jsxs("div",{className:"admin-container",style:{maxWidth:"1200px",margin:"0 auto",paddingBottom:"100px"},children:[u.show&&e.jsxs("div",{className:`toast toast-${u.type}`,style:{position:"fixed",top:"20px",right:"20px",zIndex:2e3,backgroundColor:u.type==="error"?"#dc3545":"#28a745",color:"white",padding:"12px 24px",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",gap:"10px"},children:[u.type==="error"?e.jsx(Y,{size:20}):e.jsx(J,{size:20}),e.jsx("span",{style:{fontWeight:"500"},children:u.message})]}),e.jsxs("div",{className:"admin-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("h1",{children:"Header Builder"}),e.jsxs("div",{style:{display:"flex",gap:"15px",color:"#666",fontSize:"0.8rem"},children:[w&&e.jsxs("span",{children:["Last Saved: ",e.jsx("b",{children:new Date(w).toLocaleString()})]}),N&&e.jsxs("span",{children:["Published: ",e.jsx("b",{children:new Date(N).toLocaleString()})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{className:"btn-search",onClick:()=>window.open("http://localhost:5173","_blank"),disabled:t,style:{backgroundColor:"#007bff",width:"auto"},children:[e.jsx(T,{size:16,style:{marginRight:"5px"}})," Open Live Site"]}),e.jsxs("button",{className:"btn-search",onClick:y,disabled:t||o,style:{backgroundColor:"#17a2b8",width:"auto"},children:[e.jsx(R,{size:16,style:{marginRight:"5px"}})," Refresh Data"]}),e.jsxs("button",{className:"btn-search",onClick:()=>v(!k),disabled:t,style:{backgroundColor:"#6c757d",opacity:t?.6:1},children:[e.jsx(V,{size:16,style:{marginRight:"5px"}})," History"]}),e.jsxs("button",{className:"btn-search",onClick:D,disabled:t,style:{backgroundColor:"#dc3545",opacity:t?.6:1},children:[e.jsx(R,{size:16,style:{marginRight:"5px"}})," Discard Draft"]}),e.jsxs("button",{className:"btn-search",onClick:L,disabled:t,style:{backgroundColor:"#ffc107",color:"#000",opacity:t?.6:1,cursor:t?"not-allowed":"pointer"},children:[e.jsx($,{size:16,style:{marginRight:"5px"}})," ",t?"Saving...":"Save Draft"]}),e.jsxs("button",{className:"btn-search",onClick:P,disabled:t,style:{backgroundColor:"#28a745",opacity:t?.6:1,cursor:t?"not-allowed":"pointer"},children:[e.jsx(T,{size:16,style:{marginRight:"5px"}})," ",t?"Publishing...":"Publish"]})]})]}),e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsx(Q,{settings:s,onChange:U,onToast:x,setSaving:n}),e.jsx(q,{navItems:s.navItems,onEdit:A,onDelete:E,onAdd:H}),e.jsx(K,{contact:s.contact,socials:s.socials,onChange:S}),e.jsx(X,{cta:s.cta,onChange:S})]}),e.jsx(Z,{isOpen:k,history:d,onClose:()=>v(!1),onRestore:F})]})};export{oe as default};
